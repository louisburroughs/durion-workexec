<?xml version="1.0" encoding="UTF-8"?>
<entities xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/entity-definition-3.xsd">

    <entity entity-name="DurWorkOrderItem" package-name="durion.workexec" table-name="DUR_WORK_ORDER_ITEM">
        <description>Line items on work order - parts and labor</description>
        <field name="workOrderItemId" type="id" is-pk="true"/>
        <field name="workOrderId" type="id" required="true"/>
        <field name="itemSeqId" type="id" required="true"/>
        <field name="itemType" type="text-short" required="true">
            <description>PART, LABOR, SERVICE, SUBLET, FEE, DISCOUNT</description>
        </field>
        <field name="productId" type="id">
            <description>Link to product in durion-product (for parts)</description>
        </field>
        <field name="operationId" type="id">
            <description>Link to service operation in durion-product (for labor)</description>
        </field>
        <field name="description" type="text-medium" required="true"/>
        <field name="quantity" type="number-decimal" default="1"/>
        <field name="unitPrice" type="currency-amount" required="true"/>
        <field name="lineTotal" type="currency-amount">
            <description>quantity * unitPrice</description>
        </field>
        <field name="discount" type="currency-amount"/>
        <field name="taxable" type="text-indicator" default="Y"/>
        <field name="mechanicId" type="id">
            <description>Mechanic who performed labor</description>
        </field>
        <field name="hoursWorked" type="number-decimal">
            <description>Actual hours for labor items</description>
        </field>
        <field name="statusId" type="text-short" default="ITEM_PENDING">
            <description>ITEM_PENDING, ITEM_APPROVED, ITEM_COMPLETED, ITEM_DECLINED</description>
        </field>
        <field name="warrantyItemId" type="id">
            <description>Link to warranty case if warranty work</description>
        </field>
        <field name="notes" type="text-medium"/>
        <field name="createdDate" type="date-time" default="ec.user.nowTimestamp"/>
        <relationship type="one" related-entity-name="DurWorkOrder" short-alias="workOrder">
            <key-map field-name="workOrderId" related-field-name="workOrderId"/>
        </relationship>
    </entity>

</entities>
